# Change: 分享子文档功能

## Why

当前在分享文档时，只能单独分享指定的文档，无法自动包含该文档下的所有子文档。在实际使用场景中，用户经常需要分享整个文档树结构，特别是在使用思源笔记的目录功能时，一个目录下可能包含多个相关的子文档。目前的实现方式要求用户手动逐个分享每个子文档，操作繁琐且容易遗漏。

为了提升用户体验，需要实现一个功能，允许用户在分享文档时，选择是否同时分享该文档下的所有子文档。这样可以确保分享的内容结构完整，避免出现链接断开或内容缺失的情况。

## What Changes

1. 在ShareOptions类中添加`shareSubdocuments`属性，用于控制是否分享子文档
2. 在SettingKeys.ts中添加`CUSTOM_SHARE_SUBDOCUMENTS`配置键
3. 在ShareProConfig.ts中添加全局默认配置选项
4. 在SingleDocSetting.ts中添加单次分享的子文档分享选项
5. 在SettingService.ts中实现配置的同步和管理
6. 在ShareService.ts中实现子文档的递归获取和分享逻辑
7. 确保与新UI和旧UI的兼容性，在分享对话框中添加相应的选项

## Impact

- **功能兼容性**: 需要确保与现有的分享功能完全兼容
- **UI变更**: 需要在分享对话框中添加控制子文档分享的选项
- **配置管理**: 需要在全局设置和单次分享设置中添加相应的配置项
- **性能考量**: 对于拥有大量子文档的情况，需要考虑分享操作的性能影响
- **存储影响**: 分享更多文档可能会增加存储使用量

## 迁移计划

无需特殊迁移，功能将以开关形式提供，默认值将设置为不自动分享子文档，以保持与现有行为的一致性。